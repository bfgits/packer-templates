firewall --disabled

install
cdrom

lang en_US.UTF-8
keyboard us
timezone  Europe/Rome

network --bootproto=dhcp
rootpw vagrant
authconfig --enableshadow --passalgo=sha512

selinux â€”-disabled
bootloader --location=mbr
text
skipx

logging --level=info
zerombr

clearpart --all --initlabel
autopart

auth  --useshadow  --enablemd5
firstboot --disabled
reboot

%packages --ignoremissing
@Base
@Core
%end

%post
groupadd vagrant -g 999
useradd vagrant -g vagrant -G wheel -u 900
echo 'vagrant' | passwd --stdin vagrant
echo -e '%vagrant\t ALL=(ALL)\t ALL' >> /etc/sudoers
if [[ $(uname -m | sed 's/x86_//;s/i[3-6]86/32/') == "64" ]]; then 
	rpm -i http://yum.puppetlabs.com/el/7/products/x86_64/puppetlabs-release-7-10.noarch.rpm
else 
	rpm -i http://yum.puppetlabs.com/el/7/products/i386/puppetlabs-release-7-10.noarch.rpm
fi
yum install -y puppet
%end